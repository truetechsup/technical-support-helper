# Technical Support Helper

Простое веб-приложение для поиска информации об ошибках. Разработано для сотрудников технической поддержки.

## Структура проекта

```
support-helper/           # Корень репозитория
├── app/                  # Код приложения (в Git)
│   ├── server.py
│   ├── database.py
│   ├── init_db.py
│   ├── templates/
│   ├── static/
│   ├── nginx/
│   └── Dockerfile.*
│
├── vm/                   # Файлы для ВМ (частично в Git)
│   ├── docker-compose.yml # Конфигурация Docker (в Git)
│   ├── scripts/
│   │   └── update.sh     # Скрипт обновления (в Git)
│   ├── data/             # База данных (НЕ в Git)
│   └── backups/          # Бэкапы (НЕ в Git)
│
└── README.md             # Документация
```

## Технологии

- **Python 3.11** - Backend API (стандартная библиотека)
- **Nginx** - Веб-сервер и reverse proxy
- **SQLite** - База данных
- **Docker** - Контейнеризация

## Развертывание

### На сервере (первый раз)

1. **Клонируйте репозиторий:**
```bash
cd ~
git clone https://github.com/your-username/support-helper.git support-helper
cd support-helper
```

2. **Создайте директории для данных:**
```bash
mkdir -p vm/data vm/backups
chmod 777 vm/data
```

3. **Запустите приложение:**
```bash
cd vm
docker compose up -d --build
```

**Готово!** БД автоматически инициализируется при первом запуске.

4. **Проверьте работу:**
```bash
# Проверка статуса
docker compose ps

# Просмотр логов
docker compose logs -f

# Приложение доступно: http://ваш-ip:8080
```

### Обновление приложения

```bash
cd vm
chmod +x scripts/update.sh
./scripts/update.sh
```

**Скрипт автоматически:**
- Создает бэкап кода и БД в архив (tar.gz)
- Обновляет код из Git
- Перезапускает контейнеры
- БД остается без изменений (не пересоздается)

## Разработка

1. Разрабатывайте код в директории `app/`
2. Коммитьте и пушите в GitHub
3. На сервере запускайте `vm/scripts/update.sh` для обновления

## База данных

- БД хранится в `vm/data/` (не в Git)
- При первом запуске автоматически создается и заполняется тестовыми данными
- При обновлении БД остается без изменений

## Бэкапы

- Бэкапы создаются автоматически перед каждым обновлением
- Хранятся в `vm/backups/` в виде архивов (tar.gz)
- Автоматически сохраняются последние 10 бэкапов
- Содержат код приложения и БД

## Структура на сервере

После клонирования на сервере создаются директории:
- `vm/data/` - база данных (создается автоматически)
- `vm/backups/` - бэкапы (создаются автоматически при обновлении)
